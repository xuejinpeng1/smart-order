{"remainingRequest":"c:\\Users\\pc\\Desktop\\team-work\\team work\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\pc\\Desktop\\team-work\\team work\\client\\src\\components\\Index\\index01\\row.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"c:\\Users\\pc\\Desktop\\team-work\\team work\\client\\src\\components\\Index\\index01\\row.vue","mtime":1569573446000},{"path":"c:\\Users\\pc\\Desktop\\team-work\\team work\\client\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\Users\\pc\\Desktop\\team-work\\team work\\client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"c:\\Users\\pc\\Desktop\\team-work\\team work\\client\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"c:\\Users\\pc\\Desktop\\team-work\\team work\\client\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\pc\\Desktop\\team-work\\team work\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\pc\\Desktop\\team-work\\team work\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n// @import url('../../../assets/scss/reset.scss');\r\n//修改toast样式\r\n.mint-toast {\r\n  z-index: 9999;\r\n}\r\n.mint-toast.is-placemiddle {\r\n  position: fixed;\r\n  top: 35%;\r\n}\r\n//修改button样式\r\n.mint-button--large {\r\n  width: 6.7rem;\r\n  margin: 0 auto 0.5rem;\r\n}\r\n\r\n.peopleNum {\r\n  .ETime {\r\n    text-align: left;\r\n    margin-left: 1rem;\r\n  }\r\n  font-size: 0.3rem;\r\n  .d1 {\r\n    font-size: 0.3rem;\r\n    color: #666;\r\n    display: inline-block;\r\n    margin-left: 1rem;\r\n  }\r\n  .tabnav {\r\n    margin-top: 0.3rem;\r\n  }\r\n  div.discr {\r\n    margin-top: 0.5rem;\r\n    display: inline-block;\r\n    width: 7rem;\r\n    text-align: left;\r\n    p {\r\n      margin-bottom: 0.3rem;\r\n    }\r\n  }\r\n}\r\n.shoplist {\r\n  .top {\r\n    padding: 0.2rem 0.3rem;\r\n    font-size: 0.4rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    line-height: 0.6rem;\r\n    position: relative;\r\n    border-bottom: 1px solid #e7e7e7;\r\n    p {\r\n      position: absolute;\r\n      left: 50%;\r\n      margin-left: -0.5rem;\r\n    }\r\n    img {\r\n      height: 0.4rem;\r\n      display: block;\r\n      margin-top: 0.1rem;\r\n    }\r\n    .location {\r\n      display: flex;\r\n      img {\r\n        height: 0.6rem;\r\n        margin-top: 0;\r\n      }\r\n    }\r\n  }\r\n  .container {\r\n    padding: 0.3rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    font-size: 0.4rem;\r\n    border-bottom: 1px solid #ebebeb;\r\n    .logo {\r\n      height: 1.3rem;\r\n      margin-right: 0.3rem;\r\n    }\r\n    .info {\r\n      line-height: 0.5rem;\r\n      text-align: left;\r\n      font-size: 0.3rem;\r\n      .infotop {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        .time p:last-child {\r\n          font-size: 0.25rem;\r\n          color: #bbb;\r\n        }\r\n        .distance p:last-child {\r\n          font-size: 0.2rem;\r\n          color: #ff2626;\r\n          border: 1px solid #ff2626;\r\n          line-height: 0.3rem;\r\n          text-align: center;\r\n        }\r\n      }\r\n      .infobottom {\r\n        padding-right: 0.2rem;\r\n        position: relative;\r\n        img {\r\n          width: 0.35rem;\r\n          vertical-align: bottom;\r\n          position: absolute;\r\n        }\r\n        p {\r\n          font-size: 0.25rem;\r\n          padding-left: 0.38rem;\r\n          line-height: 1.2;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["row.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"row.vue","sourceRoot":"src/components/Index/index01","sourcesContent":["<template>\r\n  <div class=\"shoplist\">\r\n    <div class=\"top\" @click=\"linkTo1\">\r\n      <img src=\"http://127.0.0.1:5050/icon/arrow-left.png\">\r\n      <p>排号</p>\r\n      <div class=\"location\">\r\n        <img src=\"http://127.0.0.1:5050/icon/row_num_posi.png\">\r\n        <span>杭州</span>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      class=\"container\"\r\n      id=\"1\"\r\n      v-for=\"(item,index) of list\"\r\n      :key=\"index\"\r\n      @click=\"linkTo(item.M_Address,item.M_Name)\"\r\n    >\r\n      <img class=\"logo\" src=\"http://127.0.0.1:5050/icon/su_logo.png\">\r\n      <div class=\"info\">\r\n        <div class=\"infotop\">\r\n          <div class=\"time\">\r\n            <p>{{item.M_Name}}</p>\r\n            <p>早晨9:00-次日凌晨7:00</p>\r\n          </div>\r\n          <div class=\"distance\">\r\n            <p>{{item.M_Distance}}km</p>\r\n            <p>正在营业</p>\r\n          </div>\r\n        </div>\r\n        <div class=\"infobottom\">\r\n          <img src=\"http://127.0.0.1:5050/icon/row_num_posi.png\">\r\n          <p>{{item.M_Address}}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <mt-popup position=\"bottom\" v-model=\"popupVisible\" popup-transition=\"popup-fade\">\r\n        <div class=\"peopleNum\" style=\"width:100%;padding:.1rem;\">\r\n          <div>\r\n            <div class=\"tabnav\">\r\n              <span style=\"font-size:.3rem\">请选择就餐人数</span>\r\n              <span class=\"d1\" style @click=\"linkTo2\">取消</span>\r\n            </div>\r\n            <mt-picker :slots=\"slots\" @change=\"onValuesChange\" :visibleItemCount=\"3\"></mt-picker>\r\n            <div class=\"ETime\">\r\n              <mt-button type=\"danger\">{{ETime}}</mt-button>\r\n            </div>\r\n            <div class=\"discr\">\r\n              <p>*12人以上请您联系门店</p>\r\n              <p>\r\n                就餐时段\r\n                <span>{{eTime}}</span>\r\n              </p>\r\n              <p>不可跨市别排号，如果您想在下一个市别就餐，请在下一个市别开始后前去排号。午市(09:00-16:00)，晚市(16:00-23:00)，夜市(23:00-次日07:00)</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"btn\">\r\n          <mt-button type=\"danger\" size=\"large\" @click=\"getNum\">确认取号</mt-button>\r\n        </div>\r\n      </mt-popup>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      slots: [\r\n        {\r\n          flex: 1,\r\n          values: [\r\n            \"1人\",\r\n            \"2人\",\r\n            \"3人\",\r\n            \"4人\",\r\n            \"5人\",\r\n            \"6人\",\r\n            \"7人\",\r\n            \"8人\",\r\n            \"9人\",\r\n            \"10人\",\r\n            \"11人\",\r\n            \"12人\"\r\n          ],\r\n          className: \"slot1\",\r\n          textAlign: \"center\"\r\n        }\r\n      ],\r\n      num: \"1人\",\r\n      list: [],\r\n      address: \"\",\r\n      popupVisible: false,\r\n      ETime: \"\",\r\n      eTime: \"\",\r\n      shopName: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    getNowFormatDate() {\r\n      var date = new Date();\r\n      var seperator1 = \"-\";\r\n      var seperator2 = \":\";\r\n      var month = date.getMonth() + 1;\r\n      var strDate = date.getDate();\r\n      if (month >= 1 && month <= 9) {\r\n        month = \"0\" + month;\r\n      }\r\n      if (strDate >= 0 && strDate <= 9) {\r\n        strDate = \"0\" + strDate;\r\n      }\r\n      var currentdate =\r\n        date.getFullYear() +\r\n        seperator1 +\r\n        month +\r\n        seperator1 +\r\n        strDate +\r\n        \" \" +\r\n        date.getHours() +\r\n        seperator2 +\r\n        date.getMinutes() +\r\n        seperator2 +\r\n        date.getSeconds();\r\n      return currentdate;\r\n    },\r\n    getNum() {\r\n      var uid = sessionStorage.getItem(\"accessToken\");\r\n\r\n    var time =this.getNowFormatDate()\r\n    console.log(time)\r\n      //未登陆跳转至登陆页面\r\n      if (uid == null) {\r\n        this.$router.push(\"/login\");\r\n      } else {\r\n        var params = new URLSearchParams();\r\n        params.append(\"uid\", uid);\r\n        params.append(\"shopname\", this.shopName);\r\n        params.append(\"addr\", this.address);\r\n        params.append(\"eTime\", this.eTime);\r\n        params.append(\"ETime\", this.ETime);\r\n        params.append(\"num\", this.num);\r\n        params.append(\"time\", time);\r\n        this.axios\r\n          .post(\"/index/rownum\", params) //传参\r\n          .then(res => {\r\n            if (res.data.code == 1) {\r\n              // this.$router.push({\r\n              //   path: \"/\"\r\n              // });\r\n              this.$router.push(\"/paihao_detailed\");\r\n            } else {\r\n              this.$toast({ message: \"请勿重复排号\" });\r\n              setTimeout(res=>{ this.$router.push(\"/paihao_detailed\")},1000)\r\n\r\n            }\r\n          })\r\n          .catch(function(err) {\r\n            console.log(err);\r\n          });\r\n      }\r\n    },\r\n    linkTo(addr, shopname) {\r\n      console.log(addr, shopname);\r\n      this.shopName = shopname;\r\n      this.address = addr;\r\n      this.popupVisible = true;\r\n      var now = new Date();\r\n      now = now.getHours();\r\n      console.log(now, this.shopName);\r\n      if (now >= 9 && now < 16) {\r\n        this.ETime = \"午市\";\r\n        this.eTime = \"午市(09:00-16:00)\";\r\n      } else if (now >= 16 && now < 23) {\r\n        this.ETime = \"晚市\";\r\n        this.eTime = \"晚市(16:00-23:00)\";\r\n      } else {\r\n        this.ETime = \"夜市\";\r\n        this.eTime = \"夜市(23:00-次日07:00)\";\r\n      }\r\n    },\r\n    linkTo1() {\r\n      this.$router.go(-1);\r\n    },\r\n    linkTo2() {\r\n      this.popupVisible = false;\r\n    },\r\n    onValuesChange(picker, values) {\r\n      if (values[0] > values[1]) {\r\n        picker.setSlotValue(1, values[0]);\r\n      }\r\n      console.log(values);\r\n      this.num = values;\r\n    },\r\n    //加载店铺信息\r\n    loadMore() {\r\n      var url = \"index/shoplist\";\r\n      this.axios.get(url).then(res => {\r\n        if (res.data.code == 1) {\r\n          this.list = res.data.data;\r\n          console.log(this.list);\r\n        }\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    this.loadMore();\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n// @import url('../../../assets/scss/reset.scss');\r\n//修改toast样式\r\n.mint-toast {\r\n  z-index: 9999;\r\n}\r\n.mint-toast.is-placemiddle {\r\n  position: fixed;\r\n  top: 35%;\r\n}\r\n//修改button样式\r\n.mint-button--large {\r\n  width: 6.7rem;\r\n  margin: 0 auto 0.5rem;\r\n}\r\n\r\n.peopleNum {\r\n  .ETime {\r\n    text-align: left;\r\n    margin-left: 1rem;\r\n  }\r\n  font-size: 0.3rem;\r\n  .d1 {\r\n    font-size: 0.3rem;\r\n    color: #666;\r\n    display: inline-block;\r\n    margin-left: 1rem;\r\n  }\r\n  .tabnav {\r\n    margin-top: 0.3rem;\r\n  }\r\n  div.discr {\r\n    margin-top: 0.5rem;\r\n    display: inline-block;\r\n    width: 7rem;\r\n    text-align: left;\r\n    p {\r\n      margin-bottom: 0.3rem;\r\n    }\r\n  }\r\n}\r\n.shoplist {\r\n  .top {\r\n    padding: 0.2rem 0.3rem;\r\n    font-size: 0.4rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    line-height: 0.6rem;\r\n    position: relative;\r\n    border-bottom: 1px solid #e7e7e7;\r\n    p {\r\n      position: absolute;\r\n      left: 50%;\r\n      margin-left: -0.5rem;\r\n    }\r\n    img {\r\n      height: 0.4rem;\r\n      display: block;\r\n      margin-top: 0.1rem;\r\n    }\r\n    .location {\r\n      display: flex;\r\n      img {\r\n        height: 0.6rem;\r\n        margin-top: 0;\r\n      }\r\n    }\r\n  }\r\n  .container {\r\n    padding: 0.3rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    font-size: 0.4rem;\r\n    border-bottom: 1px solid #ebebeb;\r\n    .logo {\r\n      height: 1.3rem;\r\n      margin-right: 0.3rem;\r\n    }\r\n    .info {\r\n      line-height: 0.5rem;\r\n      text-align: left;\r\n      font-size: 0.3rem;\r\n      .infotop {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        .time p:last-child {\r\n          font-size: 0.25rem;\r\n          color: #bbb;\r\n        }\r\n        .distance p:last-child {\r\n          font-size: 0.2rem;\r\n          color: #ff2626;\r\n          border: 1px solid #ff2626;\r\n          line-height: 0.3rem;\r\n          text-align: center;\r\n        }\r\n      }\r\n      .infobottom {\r\n        padding-right: 0.2rem;\r\n        position: relative;\r\n        img {\r\n          width: 0.35rem;\r\n          vertical-align: bottom;\r\n          position: absolute;\r\n        }\r\n        p {\r\n          font-size: 0.25rem;\r\n          padding-left: 0.38rem;\r\n          line-height: 1.2;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}